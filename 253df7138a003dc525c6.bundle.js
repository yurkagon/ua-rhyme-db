(self.webpackChunkua_rhyme_db=self.webpackChunkua_rhyme_db||[]).push([[998],{308:(r,e,n)=>{var t={"./гуділи":465,"./гудіні":102};function a(r){var e=o(r);return n(e)}function o(r){if(!n.o(t,r)){var e=new Error("Cannot find module '"+r+"'");throw e.code="MODULE_NOT_FOUND",e}return t[r]}a.keys=function(){return Object.keys(t)},a.resolve=o,r.exports=a,a.id=308},762:(r,e,n)=>{var t={"./glava941_glava94_Глава 94_Твоя черга":921,"./glava942_glava94_Глава 94_Дякую":733};function a(r){var e=o(r);return n(e)}function o(r){if(!n.o(t,r)){var e=new Error("Cannot find module '"+r+"'");throw e.code="MODULE_NOT_FOUND",e}return t[r]}a.keys=function(){return Object.keys(t)},a.resolve=o,r.exports=a,a.id=762},647:(r,e,n)=>{"use strict";n.d(e,{Z:()=>s});var t=n(81),a=n.n(t),o=n(645),i=n.n(o)()(a());i.push([r.id,".search-form{outline:none !important}.search-form *:focus{box-shadow:none}",""]);const s=i},602:(r,e,n)=>{"use strict";n.d(e,{Z:()=>s});var t=n(81),a=n.n(t),o=n(645),i=n.n(o)()(a());i.push([r.id,".search-page{display:flex;justify-content:space-between;padding-top:30px;padding:2rem}.search-page .left{flex:6}.search-page .right{flex:4}.search-page .form-wrapper{max-width:50%;margin-bottom:40px}.search-page .form-wrapper .search-page-form{width:300px}.search-page .form-wrapper .search-page-form input{border-color:var(--color-primary)}.search-page .form-wrapper .search-page-form input:focus{outline:none}.search-page .form-wrapper .search-page-form .search-button{color:var(--color-primary);border-color:var(--color-primary)}.search-page .form-wrapper .search-page-form .search-button:hover{color:#fff;background-color:rgba(7,123,173,.8)}.search-page .mention-card{min-width:430px;color:var(--color-primary);border-color:var(--color-primary)}.search-page .mention-card .card-text{font-size:14px}.search-page .rhymes{display:flex;flex-wrap:wrap}.search-page .rhymes .rhyme-element{margin-right:10px;margin-bottom:10px;align-self:flex-end;color:var(--color-primary);border-color:var(--color-primary)}.search-page .rhymes .rhyme-element:focus{box-shadow:none}.search-page .rhymes .rhyme-element:hover{color:#fff;background-color:rgba(7,123,173,.8)}",""]);const s=i},547:(r,e,n)=>{"use strict";n.d(e,{Z:()=>j});var t=n(893),a=n(536),o=n(250),i=n(512),s=n(379),c=n.n(s),l=n(795),u=n.n(l),f=n(569),p=n.n(f),h=n(565),m=n.n(h),d=n(216),v=n.n(d),g=n(589),y=n.n(g),b=n(647),x={};x.styleTagTransform=y(),x.setAttributes=m(),x.insert=p().bind(null,"head"),x.domAPI=u(),x.insertStyleElement=v(),c()(b.Z,x),b.Z&&b.Z.locals&&b.Z.locals;var w=function(){return w=Object.assign||function(r){for(var e,n=1,t=arguments.length;n<t;n++)for(var a in e=arguments[n])Object.prototype.hasOwnProperty.call(e,a)&&(r[a]=e[a]);return r},w.apply(this,arguments)};const j=function(r){var e=r.className,n=(0,o.UO)().phrase,s=(0,a.cI)(),c=s.register,l=s.handleSubmit,u=(0,o.s0)();return(0,t.jsx)("form",{onSubmit:l((function(r){var e=r.search.trim().toLowerCase();u("/search/".concat(encodeURIComponent(e)))})),className:(0,i.Z)("search-form form text-center",e),children:(0,t.jsxs)("div",{className:"input-group",children:[(0,t.jsx)("input",w({},c("search",{required:!0,value:n,minLength:2}),{className:"form-control",placeholder:"Ножиці"})),(0,t.jsx)("button",{type:"submit",className:"search-button btn btn-outline-warning",children:"Знайти"})]})})}},998:(r,e,n)=>{"use strict";n.r(e),n.d(e,{Component:()=>E});var t=n(893),a=n(294),o=n(250),i=n(547),s=n(486),c=n.n(s),l=function(r){return r.trim().toLowerCase().replace("'","").replace("’","").replace('"',"").replace("`","").replace("'","").replace("-"," ")},u=function(r){return r.charAt(0).toUpperCase()+r.slice(1)},f=function(){return f=Object.assign||function(r){for(var e,n=1,t=arguments.length;n<t;n++)for(var a in e=arguments[n])Object.prototype.hasOwnProperty.call(e,a)&&(r[a]=e[a]);return r},f.apply(this,arguments)};const p=function(){function r(){}return r.formatFolderData=function(r){var e=r.keys(),n=e.map(r);return e.reduce((function(r,e,t){var a;return f(((a={})[e.replace("./","")]=n[t],a),r)}),{})},r.loadRhymeFolder=function(){var r=n(308);return this.formatFolderData(r)},r.loadSongList=function(){return n(127).split("\n")},r.loadSongByUrl=function(r){return e=this,n=void 0,a=function(){var e,n,t,a;return function(r,e){var n,t,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(i=0)),i;)try{if(n=1,t&&(a=2&s[0]?t.return:s[0]?t.throw||((a=t.return)&&a.call(t),0):t.next)&&!(a=a.call(t,s[1])).done)return a;switch(t=0,a&&(s=[2&s[0],a.value]),s[0]){case 0:case 1:a=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,t=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((a=(a=i.trys).length>0&&a[a.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!a||s[1]>a[0]&&s[1]<a[3])){i.label=s[1];break}if(6===s[0]&&i.label<a[1]){i.label=a[1],a=s;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(s);break}a[2]&&i.ops.pop(),i.trys.pop();continue}s=e.call(r,i)}catch(r){s=[6,r],t=0}finally{n=a=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}}(this,(function(o){switch(o.label){case 0:return[4,fetch(r)];case 1:return[4,o.sent().text()];case 2:return e=o.sent(),n=e.split("###"),t=n[0],a=n[1],[2,{text:t.trim(),info:a.trim().split("\n").reduce((function(r,e){var n,t=e.split(":"),a=t[0],o=t[1];return f(f({},r),((n={})[a]=o.trim(),n))}),{})}]}}))},new((t=void 0)||(t=Promise))((function(r,o){function i(r){try{c(a.next(r))}catch(r){o(r)}}function s(r){try{c(a.throw(r))}catch(r){o(r)}}function c(e){var n;e.done?r(e.value):(n=e.value,n instanceof t?n:new t((function(r){r(n)}))).then(i,s)}c((a=a.apply(e,n||[])).next())}));var e,n,t,a},r}();var h;!function(r){r.r="r"}(h||(h={}));var m=function(){function r(){}return r.load=function(){this.loadRhymeData(),this.loadSongList()},r.getSong=function(r){return c().find(this.songList,{id:r})},r.loadFullSongData=function(r){return e=this,n=void 0,a=function(){var e,n;return function(r,e){var n,t,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(i=0)),i;)try{if(n=1,t&&(a=2&s[0]?t.return:s[0]?t.throw||((a=t.return)&&a.call(t),0):t.next)&&!(a=a.call(t,s[1])).done)return a;switch(t=0,a&&(s=[2&s[0],a.value]),s[0]){case 0:case 1:a=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,t=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((a=(a=i.trys).length>0&&a[a.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!a||s[1]>a[0]&&s[1]<a[3])){i.label=s[1];break}if(6===s[0]&&i.label<a[1]){i.label=a[1],a=s;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(s);break}a[2]&&i.ops.pop(),i.trys.pop();continue}s=e.call(r,i)}catch(r){s=[6,r],t=0}finally{n=a=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}}(this,(function(t){switch(t.label){case 0:return(e=this.getSong(r)).data?[2,e]:[4,p.loadSongByUrl(e.url)];case 1:return n=t.sent(),e.data=n,[2,e]}}))},new((t=void 0)||(t=Promise))((function(r,o){function i(r){try{c(a.next(r))}catch(r){o(r)}}function s(r){try{c(a.throw(r))}catch(r){o(r)}}function c(e){var n;e.done?r(e.value):(n=e.value,n instanceof t?n:new t((function(r){r(n)}))).then(i,s)}c((a=a.apply(e,n||[])).next())}));var e,n,t,a},r.loadSongList=function(){this.songList=p.loadSongList().map((function(r){var e=r.split("_");return{id:e[0],authorId:e[1],author:e[2],name:e[3],url:n(762)("./".concat(r))}}))},r.loadRhymeData=function(){var r=this,e=p.loadRhymeFolder();this.rhymeData=c().map(e,(function(e,n){return{key:n,rhymes:e.split("\n").filter(Boolean).map((function(e){return r.formatRawRhyme(e)}))}}))},r.formatRawRhyme=function(r){var e=r.split("#"),n=e[0],t=e.slice(1),a=n.split("/"),o=a[0],i=a.slice(1),s=this.parseRhymeInfoRaw(t);return{label:u(o.trim()),value:l(o),alternatives:i.map((function(r){return l(r)})),extra:s}},r.parseRhymeInfoRaw=function(r){var e={};return r.forEach((function(r){var n=r.split(":"),t=n[0],a=n[1];if(t===h.r){var o=a.split(",").map((function(r){var e=r.split(/\s*\[([^\]]*)\]\s*/).filter(Boolean),n=e[0],t=e[1].split("-"),a=t[0],o=t[1];return{songId:n,range:{from:Number(a),to:Number(o)}}}));Object.assign(e,{mentions:o})}})),e},r.getRhymeData=function(){return this.rhymeData},r.getSongList=function(){return this.songList},r}();m.load();const d=m;var v=function(r,e,n){if(n||2===arguments.length)for(var t,a=0,o=e.length;a<o;a++)!t&&a in e||(t||(t=Array.prototype.slice.call(e,0,a)),t[a]=e[a]);return r.concat(t||Array.prototype.slice.call(e))};const g=function(){function r(){}return r.findRhymes=function(r){var e=l(r),n=this.find(e),t=c().groupBy(n,(function(r){return r.value===e||r.alternatives.includes(e)?"target":"rhymes"}));return{target:t.target,targetMentions:c().chain(t.target).map((function(r){var e;return null===(e=r.extra)||void 0===e?void 0:e.mentions})).compact().flatten().uniqBy((function(r){return"".concat(r.songId,"-").concat(r.range.from,"-").concat(r.range.to)})).value(),rhymes:c().uniqBy(t.rhymes,"value")}},r.find=function(r,e){var n=this;void 0===e&&(e=[]);var t=d.getRhymeData(),a=c().chain(t).filter((function(e){return e.rhymes.some((function(e){return n.compareRhymes(e,r)}))})).map("rhymes").flatten().value(),o=v(v([],e,!0),a,!0);if(r.includes(" ")){var i=this.removeFirstWord(r);return this.find(i,o)}return o},r.compareRhymes=function(r,e){return r.value===e||!!r.alternatives.includes(e)},r.removeFirstWord=function(r){var e=r.split(" ");return e.shift(),e.join(" ")},r}();var y=function(){return y=Object.assign||function(r){for(var e,n=1,t=arguments.length;n<t;n++)for(var a in e=arguments[n])Object.prototype.hasOwnProperty.call(e,a)&&(r[a]=e[a]);return r},y.apply(this,arguments)};const b=function(r){var e=r.data,n=(0,a.useState)((function(){return d.getSong(e.songId)})),o=n[0],i=n[1];(0,a.useEffect)((function(){d.loadFullSongData(e.songId).then((function(r){i(y({},r))}))}),[e]);var s=Boolean(null==o?void 0:o.data),c=(0,a.useMemo)((function(){return s?o.data.text.split("\n").slice(e.range.from-1,e.range.to):null}),[s,e]);return(0,t.jsxs)("div",{className:"mention-card card mb-3",children:[(0,t.jsxs)("div",{className:"card-header",children:[o.author," - ",o.name]}),(0,t.jsxs)("div",{className:"card-body",children:[s&&c.map((function(r,e){return(0,t.jsx)("p",{className:"card-text",children:r},e)})),!s&&(0,t.jsx)("div",{className:"spinner-grow text-primary",role:"status",children:(0,t.jsx)("span",{className:"sr-only",children:"Loading..."})})]})]})};var x=n(379),w=n.n(x),j=n(795),N=n.n(j),k=n(569),S=n.n(k),_=n(565),O=n.n(_),R=n(216),D=n.n(R),L=n(589),Z=n.n(L),I=n(602),C={};function E(){var r=(0,o.UO)().phrase,e=(0,o.s0)(),n=(0,a.useMemo)((function(){return g.findRhymes(r)}),[r]),s=n.rhymes,c=n.targetMentions;return(0,t.jsxs)("main",{className:"search-page flex-column flex-md-row",children:[(0,t.jsxs)("div",{className:"left",children:[(0,t.jsxs)("div",{className:"form-wrapper",children:[(0,t.jsx)("h5",{className:"",children:"Рифмопошук"}),(0,t.jsx)(i.Z,{className:"search-page-form"},r)]}),(0,t.jsx)("div",{className:"rhymes",children:s.map((function(r,n){return(0,t.jsx)("button",{onClick:function(){return e("/search/".concat(r.value))},className:"rhyme-element btn btn-outline-primary",children:r.label},n)}))})]}),(0,t.jsx)("div",{className:"right",children:c.map((function(r,e){return(0,t.jsx)(b,{data:r},e)}))})]})}C.styleTagTransform=Z(),C.setAttributes=O(),C.insert=S().bind(null,"head"),C.domAPI=N(),C.insertStyleElement=D(),w()(I.Z,C),I.Z&&I.Z.locals&&I.Z.locals},921:(r,e,n)=>{"use strict";r.exports=n.p+"8a771cfd432cdc0f0a1d"},733:(r,e,n)=>{"use strict";r.exports=n.p+"d70c9856991e6805c942"},465:r=>{"use strict";r.exports="гудіні/гарі гудіні#r:glava941[2-3]\nу ділі/у діло/ділі#r:glava941[2-3]\nгуділи/гуділа/гуділо\n"},102:r=>{"use strict";r.exports="Гудіні/гарі гудіні/гаррі гудіні#r:glava941[2-3]\nу ділі/у діло/ділі#r:glava941[2-3]\n\n"},127:r=>{"use strict";r.exports="glava941_glava94_Глава 94_Твоя черга\nglava942_glava94_Глава 94_Дякую"}}]);