"use strict";(self.webpackChunkua_rhyme_db=self.webpackChunkua_rhyme_db||[]).push([[544],{8602:(e,r,n)=>{n.d(r,{Z:()=>i});var t=n(8081),a=n.n(t),o=n(3645),s=n.n(o)()(a());s.push([e.id,".search-page{display:flex;justify-content:space-between;padding-top:30px;padding:2rem}.search-page .left{flex:6}.search-page .right{flex:4}.search-page .form-wrapper{max-width:50%;margin-bottom:40px}.search-page .form-wrapper .search-page-form{width:300px}.search-page .mention-card{color:var(--color-primary);border-color:var(--color-primary);cursor:pointer;transition:transform .2s,box-shadow .2s}.search-page .mention-card .card-text{font-size:14px}.search-page .mention-card:hover{transform:translateY(-5px);box-shadow:0 4px 8px rgba(0,0,0,.1)}.search-page .rhymes{display:flex;flex-wrap:wrap}.search-page .rhymes .rhyme-element{margin-right:10px;margin-bottom:10px;align-self:flex-end;color:var(--color-primary);border-color:var(--color-primary)}.search-page .rhymes .rhyme-element::first-letter{text-transform:capitalize}.search-page .rhymes .rhyme-element:focus{box-shadow:none}.search-page .rhymes .rhyme-element:hover{color:#fff;background-color:rgba(7,123,173,.8)}.search-page .rhymes .rhyme-element.secondary{color:#ff4500;border-color:#ff4500}.search-page .rhymes .rhyme-element.secondary:hover{color:#fff;background-color:rgba(255,69,0,.8)}",""]);const i=s},8544:(e,r,n)=>{n.r(r),n.d(r,{Component:()=>B});var t=n(5893),a=n(7294),o=n(9250),s=n(21),i=n(6486),c=n.n(i),l=n(8593),u=n(3089),f=function(){return f=Object.assign||function(e){for(var r,n=1,t=arguments.length;n<t;n++)for(var a in r=arguments[n])Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a]);return e},f.apply(this,arguments)},h=function(e,r,n){if(n||2===arguments.length)for(var t,a=0,o=r.length;a<o;a++)!t&&a in r||(t||(t=Array.prototype.slice.call(r,0,a)),t[a]=r[a]);return e.concat(t||Array.prototype.slice.call(r))};const m=function(){function e(){}return e.findRhymes=function(e){return h(h([],this.findByEnd(e),!0),this.findByStart(e),!0)},e.findByStart=function(e){return this.find(e,!1)},e.findByEnd=function(e){return this.find(e,!0)},e.find=function(r,n){if(void 0===n&&(n=!0),!r||"string"!=typeof r)return[];var t=r.replace(" ","").replace(/[`~!@#$%^&*()_|+\-=?;:'",.<>\{\}\[\]\\\/]/gi,"");if(t.length<1)return[];for(var a=[],o=e.parseString(t),s=e.getRegExp(o,2,n),i=0,c=u.Z.getRhymeWords();i<c.length;i++){var l=c[i],h=l.label.trim();s.test(h)&&h.toLowerCase()!==t.toLowerCase()&&a.push(f(f({},l),{algorithmic:!0}))}return a},e.getRegExp=function(e,r,n){void 0===r&&(r=1),void 0===n&&(n=!0);for(var t,a=[],o=[],s=h([],e,!0).reverse(),i=0;i<r;i++)a.push(i);for(var c=0,l=a;c<l.length;c++){var u=l[c];o.push(n?s[u]:e[u])}return n&&(o=o.reverse()),t=n?o.join("")+"$":"^"+o.join(""),new RegExp(t,"iu")},e.parseString=function(r){var n="",t={},a=e.mbStrlen(r),o=r.split("");if(o.length<1)return[];for(var s=0;s<o.length;s++){for(var i=o[s],c=!1,l=0,u=Object.keys(e.GROUPS);l<u.length;l++){var f=u[l];if(e.GROUPS[f].includes(i.toLowerCase())){t[s]=e.GROUPS_IDS[f],c=!0;break}}c||(t[s]=o[s])}for(var h=0,m=Object.keys(t);h<m.length;h++){var p=m[h],d=t[+p],g=a===+p+1?t[+p]:t[+p+1];d-g==0&&g==e.GROUPS_IDS.vowels?n+=o[p]+(a!==+p+1?"-":""):!e.isNumeric(g)||d-g<=0?n+=o[+p]:n+=o[+p]+"-"}return n.split("-")},e.mbStrlen=function(e){return e.replace(/[\u{FE00}-\u{FE0F}]/gu,"").length},e.isNumeric=function(e){return!isNaN(e-parseFloat(e))},e.GROUPS={vowels:["а","е","є","и","і","о","у","ю","я","ї"],consonantsSonorousOnly:["л","м","н","р","й"],consonantsSonorous:["б","в","г","д","з","ж"],consonantsMuffled:["к","п","с","ф","т","ш","щ","х","ц","ч"]},e.GROUPS_IDS={vowels:4,consonantsSonorousOnly:3,consonantsSonorous:2,consonantsMuffled:1},e}();var p=function(e,r,n){if(n||2===arguments.length)for(var t,a=0,o=r.length;a<o;a++)!t&&a in r||(t||(t=Array.prototype.slice.call(r,0,a)),t[a]=r[a]);return e.concat(t||Array.prototype.slice.call(r))};const d=function(){function e(){}return e.findRhymes=function(e){var r=m.findRhymes(e),n=(0,l.Mr)(e),t=this.find(n),a=c().isEmpty(t)?{target:[],rhymes:[]}:c().groupBy(t,(function(e){return e.value===n||e.alternatives.includes(n)?"target":"rhymes"}));return{target:a.target,targetMentions:c().chain(a.target).map((function(e){var r;return null===(r=e.extra)||void 0===r?void 0:r.mentions})).compact().flatten().uniqBy((function(e){return"".concat(e.songId,"-").concat(e.range.from,"-").concat(e.range.to)})).value(),rhymes:c().uniqBy(p(p([],a.rhymes,!0),r,!0),"label")}},e.find=function(e,r){var n=this;void 0===r&&(r=[]);var t=u.Z.getRhymeData(),a=c().chain(t).filter((function(r){return r.rhymes.some((function(r){return n.compareRhymes(r,e)}))})).map("rhymes").flatten().value(),o=p(p([],r,!0),a,!0);if(e.includes(" ")){var s=this.removeFirstWord(e);return this.find(s,o)}return o},e.compareRhymes=function(e,r){return e.value===r||!!e.alternatives.includes(r)},e.removeFirstWord=function(e){var r=e.split(" ");return r.shift(),r.join(" ")},e}();var g=n(512),y=function(){return y=Object.assign||function(e){for(var r,n=1,t=arguments.length;n<t;n++)for(var a in r=arguments[n])Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a]);return e},y.apply(this,arguments)};const v=function(e){var r=e.data,n=e.onClick,o=(0,a.useState)((function(){return u.Z.getSong(r.songId)})),s=o[0],i=o[1];(0,a.useEffect)((function(){u.Z.loadFullSongData(r.songId).then((function(e){i(y({},e))}))}),[r]);var c=Boolean(null==s?void 0:s.data),l=(0,a.useMemo)((function(){return c?s.data.text.split("\n").slice(r.range.from-1,r.range.to):null}),[c,r]);return c?(0,t.jsxs)("div",{className:"mention-card card mb-3",onClick:n,children:[(0,t.jsxs)("div",{className:"card-header",children:[s.author," - ",s.name]}),(0,t.jsx)("div",{className:"card-body",children:c&&l.map((function(e,r){return(0,t.jsx)("p",{className:(0,g.Z)("card-text",e.includes("[")&&"text-primary-italic"),children:e.includes("[")?e.replace("[","").replace("]",""):e},r)}))})]}):null};var x=n(3379),b=n.n(x),j=n(7795),w=n.n(j),S=n(569),R=n.n(S),O=n(3565),N=n.n(O),k=n(9216),Z=n.n(k),C=n(4589),E=n.n(C),I=n(8602),P={};function B(){var e=(0,o.UO)().phrase,r=(0,o.s0)(),n=(0,a.useMemo)((function(){return d.findRhymes(e)}),[e]),i=n.rhymes,c=n.targetMentions;return(0,t.jsxs)("main",{className:"search-page flex-column flex-md-row",children:[(0,t.jsxs)("div",{className:"left",children:[(0,t.jsxs)("div",{className:"form-wrapper",children:[(0,t.jsx)("h5",{className:"",children:"Рифмопошук"}),(0,t.jsx)(s.Z,{className:"search-page-form"},e)]}),(0,t.jsx)("div",{className:"rhymes",children:i.map((function(e,n){return(0,t.jsx)("button",{onClick:function(){return r("/search/".concat(encodeURIComponent(e.label)))},className:(0,g.Z)("rhyme-element btn btn-outline-primary",e.algorithmic?"secondary":""),children:e.label},n)}))})]}),(0,t.jsx)("div",{className:"right",children:c.map((function(e,n){return(0,t.jsx)(v,{onClick:function(){return r("/songs/".concat(e.songId))},data:e},n)}))})]})}P.styleTagTransform=E(),P.setAttributes=N(),P.insert=R().bind(null,"head"),P.domAPI=w(),P.insertStyleElement=Z(),b()(I.Z,P),I.Z&&I.Z.locals&&I.Z.locals}}]);